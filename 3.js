(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{365:function(e,t,n){"use strict";n.r(t);var a=n(9),r=n.n(a),s=n(110),o=n.n(s),c=n(111),p=n.n(c),i=n(112),l=n.n(i),u=n(113),f=n.n(u),h=n(114),d=n.n(h),w=n(0),b=n.n(w),v=n(105),k=n(59),m=n(367),x=v.a.withRouterConnect,I=function(e){function t(){var e;return o()(this,t),(e=l()(this,f()(t).apply(this,arguments))).state={appInfo:{appId:"",appName:"",scripts:[],styles:[]}},e}return d()(t,e),p()(t,[{key:"componentDidMount",value:function(){var e,t,n,a,s,o,c,p,i,l,u,f,h,d;return r.a.async((function(w){for(;;)switch(w.prev=w.next){case 0:return e=window.location.href.split("/")[window.location.href.split("/").length-1],t=window.localStorage.getItem("token"),n=!1,w.prev=3,w.next=6,r.a.awrap(Object(k.c)(t));case 6:a=w.sent,s=a.apps,o=!0,c=!1,p=void 0,w.prev=11,i=s[Symbol.iterator]();case 13:if(o=(l=i.next()).done){w.next=21;break}if(l.value.appId!==e){w.next=18;break}return n=!0,w.abrupt("break",21);case 18:o=!0,w.next=13;break;case 21:w.next=27;break;case 23:w.prev=23,w.t0=w.catch(11),c=!0,p=w.t0;case 27:w.prev=27,w.prev=28,o||null==i.return||i.return();case 30:if(w.prev=30,!c){w.next=33;break}throw p;case 33:return w.finish(30);case 34:return w.finish(27);case 35:if(!n){w.next=53;break}return w.next=38,r.a.awrap(Object(k.a)(e));case 38:return u=w.sent,f=u.appName,h=u.scripts,d=u.styles,this.setState({appInfo:{appId:e,appName:f,scripts:h,styles:d}}),w.prev=43,w.next=46,r.a.awrap(this.props.dispatch({type:"global/userInfo"}));case 46:w.next=51;break;case 48:w.prev=48,w.t1=w.catch(43),console.log(w.t1);case 51:w.next=54;break;case 53:window.location.replace("//rms.kaishens.cn/screen");case 54:w.next=59;break;case 56:w.prev=56,w.t2=w.catch(3),console.log("验证token的情况有问题，这种时候应该会自己跳回login");case 59:case"end":return w.stop()}}),null,this,[[3,56],[11,23,27,35],[28,,30,34],[43,48]])}},{key:"render",value:function(){var e=this.state.appInfo,t=this.props.state,n=t.userId,a=t.userName,r=t.position;return console.log(n,a,r),b.a.createElement(w.Fragment,null,b.a.createElement(m.d,{bgColor:"#1890ff",navTitle:e.appName,onScreen:function(){window.location.replace("//rms.kaishens.cn/screen")},userId:n,userName:a,position:r}),b.a.createElement(m.a,{appId:e.appId,manifest:e}))}}]),t}(w.Component);t.default=x(I,"global")}}]);