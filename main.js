!function(e){function t(t){for(var n,s,o=t[0],l=t[1],c=t[2],u=0,p=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(m&&m(t);p.length;)p.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,o=1;o<a.length;o++){var l=a[o];0!==r[l]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},r={0:0},i=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="http://127.0.0.1:3030/";var o=window.webpackJsonp=window.webpackJsonp||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var m=l;i.push([211,1]),a()}({146:function(e,t,a){e.exports={border:"_2P4YEUwibtqWOQFLkWKVJB",topBorder:"aRvtaT1IPa9QHvLXCBkr1"}},183:function(e,t,a){e.exports={pageContainer:"_3LMLu1y0hubTsnZFfP_55m"}},211:function(e,t,a){a(212),e.exports=a(428)},212:function(e,t){e.exports='<!doctype html> <html lang=zh-cn> <head> <title></title> <meta charset=UTF-8> <meta http-equiv=X-UA-Compatible content="IE=edge"> <style>#dashboard,body,html{position:relative;width:100%;height:100%;margin:0;overflow-x:hidden;overflow-y:hidden;-webkit-overflow-scrolling:touch;padding:0;-webkit-text-size-adjust:100%!important;text-size-adjust:100%!important;-moz-text-size-adjust:100%!important;font-family:"Segoe UI","Helvetica Neue","Lucida Grande",Roboto,Ebrima,"Nirmala UI",Gadugi,"Segoe Xbox Symbol","Segoe UI Symbol","Meiryo UI","Khmer UI",Tunga,"Lao UI",Raavi,"Iskoola Pota",Latha,Leelawadee,"Microsoft YaHei UI","Microsoft JhengHei UI","Malgun Gothic","Estrangelo Edessa","Microsoft Himalaya","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Tai Le","Microsoft Yi Baiti","Mongolian Baiti","MV Boli","Myanmar Text","Cambria Math",serif}.ant-menu-sub{background-color:#141414!important}.ant-menu-item-active{background-color:#262626!important}.ant-menu-item-selected{background-color:#434343!important}</style> </head> <body> <div id=dashboard></div> </body> </html> '},26:function(e,t,a){e.exports={outer:"_3bmkPBHJw7FtL4KFAgYh9",middle:"SrMxNwLpqozAX8uFK__0b",inner:"_3b3iGQ3-lcZHnig19fqS8o",title:"J6zOG_0cNqhfhbfLQyC6V",titleContainer:"_3KoU7kkgXMAFRzyBEAY4ev",titleDescribe:"_1Dp4i2gUlIW9I0P5UeN5yT",chooseAccount:"_1-IWl5HD2cbgYHwc1GcFof",prompt:"vFxGaNJjSIzjhycjNA652",button:"_2VtZD6MO0Szv8h8MNAXD23"}},428:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(22),i=a.n(r),s=a(142),o=a(15),l=a(34),c=(a(233),a(432)),m=a(87),u=a.n(m),p=a(183),d=a.n(p),h=a(1),g=a.n(h);var f=e=>{const t=e.style||{},a=g()(d.a.pageContainer,e.className);return n.createElement("div",{className:a,style:{...t}},e.children)},y=a.p+"fc195c20864aa54b4f43c8eebfbab5ec.svg";const{withRouterConnect:E}=i.a;class b extends n.PureComponent{render(){return n.createElement("div",null,"Overview")}}var _=E(b),v=a(203),k=(a(181),a(149)),C=(a(154),a(20)),w=(a(89),a(208)),S=(a(259),a(39)),x=(a(155),a(67)),I=(a(156),a(146)),N=a.n(I),F=a(205),R=(a(266),a(24)),P=(a(429),a(37)),L=(a(153),a(119)),T=(a(273),a(120)),j=(a(276),a(65)),M=(a(152),a(148)),O=(a(279),a(46)),V=a.n(O),q=a(184);const A="https://api.kaishens.cn",K=e=>{if(1e3===e.status)return e.data.token&&window.localStorage.setItem("token",e.data.token),{...e.data};throw{apiInfo:e.message}};V.a.interceptors.response.use(e=>new Promise((t,a)=>{e.status&&200===e.status&&"error"===e.data.status?a({message:e.data.message}):t(e)}),e=>(403===e.response.status&&window.location.replace("/login"),Promise.resolve(e)));const B=async(e,t,a,n)=>{const r=await V.a.post(A+"/api/disable",{is_enabled:a?1:0,api_id:n},{headers:{token:e,uid:t}});return K(r.data)},D=async(e,t)=>{const a=await V.a.get(A+"/api/list",{headers:{token:e,uid:t}});return 403===a.status&&window.location.replace("/login"),K(a.data)},{connect:U}=i.a,{Option:G}=P.a,{TabPane:H}=M.a;class z extends n.PureComponent{constructor(e){super(e),this.state={visible:!1,createApiConfigLoading:!1,limitFormConfig:0},this.form=n.createRef(),this.form2=n.createRef(),this.token=this.props.state.global.token,this.uid=this.props.state.global.user_id,this.form2_value={rate_limit:0,token_rate:1e4,token_sum:2e4}}render(){return n.createElement(n.Fragment,null,n.createElement("div",{className:this.props.className,style:{...this.props.style},onClick:()=>{this.setState({visible:!0},()=>{"edit"===this.props.type&&(console.log("此处请求单个接口的信息，如果模式是edit的话"),(async(e,t,a)=>{const n=await V.a.get(`${A}/api/config?api_id=${a}`,{headers:{token:e,uid:t}});return K(n.data)})(this.token,this.uid,this.props.api_id).then(e=>{this.form2_value={rate_limit:e.rate_limit,token_rate:e.token_rate,token_sum:e.token_sum},this.form.current&&this.form.current.setFieldsValue(e),this.setState({limitFormConfig:e.rate_limit},()=>{this.form2.current&&this.form2.current.setFieldsValue(this.form2_value)})}).catch(()=>S.a.error("获取单个接口配置信息失败")))})}},this.props.children),n.createElement(F.a,{visible:this.state.visible,okText:"确认",cancelText:"取消",bodyStyle:{height:593},okButtonProps:{loading:this.state.createApiConfigLoading},onOk:()=>{this.setState({createApiConfigLoading:!0}),this.form.current&&this.form.current.submit()},onCancel:()=>{this.setState({visible:!1},()=>{this.form.current&&this.form.current.resetFields(),this.form2.current&&this.form2.current.resetFields()})}},n.createElement(M.a,{defaultActiveKey:"1",tabBarStyle:{marginBottom:20}},n.createElement(H,{tab:"基础信息",key:"1",forceRender:!0},n.createElement(R.a,{labelCol:{span:4},wrapperCol:{span:18},onValuesChange:()=>{},onFinish:()=>{const e=this.props.state.global.token,t=this.props.state.global.user_id,a={};if(this.form.current){const n=this.form.current.getFieldsValue();if(a.name=n.name,a.tag=n.tag,a.protocol=n.protocol,a.host=n.host,a.port=n.port,a.method=n.method,a.prefix=n.prefix,a.upstream=n.upstream,a.is_enabled=n.is_enabled,a.auth_type=n.auth_type,this.form2.current){const e=this.form2.current.getFieldsValue();a.rate_limit=e.rate_limit,a.token_rate=e.token_rate,a.token_sum=e.token_sum}"create"===this.props.type&&(async(e,t,a)=>{const n=await V.a.post(A+"/api/create",{...a},{headers:{token:e,uid:t}});return K(n.data)})(e,t,a).then(()=>{S.a.success("新建接口配置成功"),this.setState({createApiConfigLoading:!1,visible:!1},()=>{this.form.current&&this.form.current.resetFields(),this.props.onSuccess&&this.props.onSuccess()})}).catch(()=>{S.a.success("新建接口配置失败"),this.setState({createApiConfigLoading:!1})}),"edit"===this.props.type&&(a.api_id=this.props.api_id,(async(e,t,a)=>{const n=await V.a.post(A+"/api/update",{...a},{headers:{token:e,uid:t}});return K(n.data)})(e,t,a).then(()=>{S.a.success("更新接口配置成功"),this.setState({createApiConfigLoading:!1,visible:!1},()=>{this.form.current&&this.form.current.resetFields(),this.props.onSuccess&&this.props.onSuccess()})}).catch(()=>{S.a.success("更新接口配置失败"),this.setState({createApiConfigLoading:!1})}))}},onFinishFailed:()=>{this.setState({createApiConfigLoading:!1})},ref:this.form},n.createElement(R.a.Item,{label:"名称",name:"name",rules:[{required:!0,message:"请输入接口名称！"}]},n.createElement(x.a,{autoComplete:"off",placeholder:"请输入接口名称",spellCheck:"false"})),n.createElement(R.a.Item,{label:"分类",name:"tag",rules:[{required:!0,message:"请设置接口分类！"}]},n.createElement(x.a,{autoComplete:"off",placeholder:"请设置接口分类",spellCheck:"false"})),n.createElement(R.a.Item,{label:"对外路由",name:"prefix",rules:[{required:!0,message:"请输入接口对外路由！"}]},n.createElement(x.a,{autoComplete:"off",placeholder:"请输入接口对外路由",spellCheck:"false"})),n.createElement(R.a.Item,{label:"是否启用",name:"is_enabled",rules:[{required:!0,message:"请设置此接口是否启用！"}],initialValue:0},n.createElement(j.default.Group,null,n.createElement(j.default,{value:0},"禁用"),n.createElement(j.default,{value:1},"启用"))),n.createElement(L.a,{orientation:"left"},"上游服务信息"),n.createElement(R.a.Item,{label:"协议类型",name:"protocol",rules:[{required:!0,message:"请输入上游服务协议类型！"}],initialValue:"http"},n.createElement(P.a,null,n.createElement(G,{value:"https"},"HTTPS"),n.createElement(G,{value:"http"},"HTTP"))),n.createElement(R.a.Item,{label:"服务地址",name:"host",rules:[{required:!0,message:"请输入上游服务地址！"}]},n.createElement(x.a,{autoComplete:"off",placeholder:"请输入上游服务地址",spellCheck:"false"})),n.createElement(R.a.Item,{label:"请求类型",name:"method",rules:[{required:!0,message:"请设置上游服务请求类型！"}],initialValue:"GET"},n.createElement(P.a,null,n.createElement(G,{value:"GET"},"GET"),n.createElement(G,{value:"POST"},"POST"),n.createElement(G,{value:"PUT"},"PUT"),n.createElement(G,{value:"DELETE"},"DELETE"))),n.createElement(R.a.Item,{label:"端口",name:"port",rules:[{required:!0,message:"请设置上游服务的端口！"}],initialValue:80},n.createElement(T.a,null)),n.createElement(R.a.Item,{label:"路由地址",name:"upstream",rules:[{required:!0,message:"请设置上游服务的路由地址！"}]},n.createElement(x.a,{autoComplete:"off",placeholder:"请设置上游服务的路由地址",spellCheck:"false"})),n.createElement(L.a,{orientation:"left"},"扩展配置"),n.createElement(R.a.Item,{label:"身份校验",name:"auth_type",rules:[{required:!0,message:"请设置此接口的身份校验类型！"}],initialValue:0},n.createElement(P.a,null,n.createElement(G,{value:0},"无鉴权"),n.createElement(G,{value:1},"JWT鉴权"))))),n.createElement(H,{tab:"熔断/限流",key:"2",forceRender:!0},n.createElement(R.a,{labelCol:{span:4},wrapperCol:{span:18},ref:this.form2,onValuesChange:(e,t)=>{console.log(e,t),this.setState({limitFormConfig:t.rate_limit})}},n.createElement(R.a.Item,{label:"限流算法",name:"rate_limit",rules:[{required:!0,message:"请设置此接口的限流算法！"}],initialValue:0},n.createElement(P.a,null,n.createElement(G,{value:0},"无"),n.createElement(G,{value:2},"令牌桶"))),0!==this.state.limitFormConfig?n.createElement(L.a,{orientation:"left"},"选项"):null,2===this.state.limitFormConfig?n.createElement(R.a.Item,{label:"令牌速率",name:"token_rate",rules:[{required:!0,message:"请设置每秒生成令牌速率！"}],initialValue:1e4},n.createElement(T.a,null)):null,2===this.state.limitFormConfig?n.createElement(R.a.Item,{label:"令牌数量",name:"token_sum",rules:[{required:!0,message:"请设置总令牌数量！"}],initialValue:2e4},n.createElement(T.a,null)):null)))))}}var W=U(z);const{withRouterConnect:X}=i.a,{Search:J}=x.a;class Y extends n.PureComponent{constructor(){super(...arguments),this.state={gatewayData:[],selectedRowKeys:[],gatewayConfigLoading:!1},this.token=this.props.state.global.token,this.uid=this.props.state.global.user_id,this.gatewayCol=[{title:"名称",dataIndex:"name",key:"name"},{title:"分类",dataIndex:"tag",key:"tag",render:e=>{const t=Y.stringToColor(e);return n.createElement(k.a,{color:t},e)}},{title:"类型",dataIndex:"method",key:"method"},{title:"对外路由",dataIndex:"prefix",key:"prefix"},{title:"上游服务",dataIndex:"upstream",key:"upstream",render:e=>n.createElement("a",{onClick:()=>{alert("显示上游服务的详情")}},e)},{title:"调用次数",dataIndex:"call",key:"call"},{title:"是否有效",dataIndex:"is_enabled",key:"is_enabled",render:(e,t)=>n.createElement(k.a,{color:e?"green":"volcano"},e?"运行中":"已关闭")},{title:"操作",key:"action",render:(e,t)=>n.createElement("span",{style:{display:"flex"}},n.createElement(W,{type:"edit",api_id:t.api_id,onSuccess:()=>{this.init_api_config()}},n.createElement("a",{style:{marginRight:16}},"详情")),t.is_enabled?n.createElement("a",{style:{marginRight:16},onClick:()=>{B(this.token,this.uid,!1,t.api_id).then(()=>this.init_api_config()).catch(()=>S.a.error("禁用接口失败"))}},"禁用"):n.createElement("a",{style:{marginRight:16},onClick:()=>{B(this.token,this.uid,!0,t.api_id).then(()=>this.init_api_config()).catch(()=>S.a.error("启用接口失败"))}},"启用"),n.createElement("a",{onClick:()=>{(async(e,t,a)=>{const n=await V.a.post(A+"/api/delete",{api_id:a},{headers:{token:e,uid:t}});return K(n.data)})(this.token,this.uid,t.api_id).then(()=>{S.a.success("删除接口成功"),this.init_api_config()}).catch(()=>S.a.error("删除接口失败"))}},"删除"))}]}static stringToColor(e){let t=0;for(let a=0;a<e.length;a++)t=e.charCodeAt(a)+((t<<5)-t);let a="#";for(let e=0;e<3;e++){a+=("00"+(t>>8*e&255).toString(16)).substr(-2)}return a}componentDidMount(){document.title="接口网关",this.init_api_config()}render(){return n.createElement(f,null,n.createElement("div",{className:N.a.topBorder},n.createElement(w.a,{message:`已选择 ${this.state.selectedRowKeys.length} 项，服务调用次数总计 0 次`,type:"info",showIcon:!0}),n.createElement("div",{style:{display:"flex",alignItems:"center"}},n.createElement("div",{style:{margin:10}},n.createElement(J,null)),n.createElement(W,{type:"create",onSuccess:()=>{this.init_api_config()}},n.createElement(C.a,{style:{marginRight:10}},"新建接口")),n.createElement(C.a,{onClick:()=>{(async(e,t)=>(await V.a.post(A+"/gateway/restart",{},{headers:{token:e,uid:t}})).data)(this.token,this.uid).then(()=>{S.a.success("保存配置成功"),this.init_api_config()}).catch(()=>S.a.error("保存配置失败"))}},"保存配置"))),n.createElement("div",{className:N.a.border},n.createElement(v.a,{rowSelection:{onChange:e=>{this.setState({selectedRowKeys:e})},selectedRowKeys:this.state.selectedRowKeys},columns:this.gatewayCol,dataSource:this.state.gatewayData,loading:this.state.gatewayConfigLoading})))}init_api_config(){this.setState({gatewayConfigLoading:!0}),D(this.token,this.uid).then(e=>{if(e.api_list){const t=[];for(let a=0;a<e.api_list.length;a++)t.push({key:a,api_id:e.api_list[a].api_id,name:e.api_list[a].name,tag:e.api_list[a].tag,method:e.api_list[a].method,prefix:e.api_list[a].prefix,upstream:e.api_list[a].upstream,call:"暂无统计！",is_enabled:1===e.api_list[a].is_enabled});this.setState({gatewayData:t,gatewayConfigLoading:!1})}else S.a.error("初始化接口配置信息失败"),this.setState({gatewayConfigLoading:!1})}).catch(()=>{S.a.error("获取接口配置信息失败"),this.setState({gatewayConfigLoading:!1})})}}var Z=X(Y);const{withRouterConnect:Q}=i.a;class $ extends n.PureComponent{render(){return n.createElement("div",null,"Monitoring")}}var ee=Q($);const{SubMenu:te}=l.a,{withRouterConnect:ae}=i.a;class ne extends n.PureComponent{constructor(){super(...arguments),this.state={collapsed:!1,menus:[{key:"dashboard",title:"Dashboard",icon:"icon-activity-outline",sub:[{key:"/main",title:"概览",path:"/main"},{key:"/main/monitoring",title:"监控",path:"/main/monitoring"}]},{key:"/main/gateway",title:"接口网关",icon:"icon-navigation--outline",path:"/main/gateway"}]},this.IconFont=Object(c.a)({scriptUrl:"//at.alicdn.com/t/font_1761874_57vjfcyo30h.js"})}render(){const e=this.IconFont;return n.createElement(f,{style:{backgroundColor:"#353333"}},n.createElement("div",{className:u.a.menu},n.createElement("div",{style:{padding:"20px 20px 0 20px"}},n.createElement("img",{src:y,className:u.a.logo,alt:"凯神科技"}),n.createElement("div",{style:{backgroundColor:"#434343",height:1,margin:"18px 0"}})),n.createElement(l.a,{defaultSelectedKeys:[this.props.location.pathname],defaultOpenKeys:["dashboard"],mode:"inline",theme:"dark",inlineCollapsed:this.state.collapsed,style:{backgroundColor:"#1f1f1f"}},this.state.menus.map(t=>t.sub?n.createElement(te,{key:t.key,title:n.createElement("span",null,n.createElement(e,{type:t.icon}),n.createElement("span",null,t.title))},t.sub.map(e=>n.createElement(l.a.Item,{key:e.key,onClick:()=>{e.path&&this.props.history.push(e.path)}},e.title))):n.createElement(l.a.Item,{key:t.key,onClick:()=>{t.path&&this.props.history.push(t.path)}},n.createElement(e,{type:t.icon}),n.createElement("span",null,t.title))))),n.createElement("div",{className:u.a.right},n.createElement("div",{className:u.a.navBar}),n.createElement("div",{id:"application",className:u.a.content},n.createElement(o.Switch,null,n.createElement(o.Route,{path:""+this.props.match.url,exact:!0,component:_}),n.createElement(o.Route,{path:this.props.match.url+"/monitoring",component:ee}),n.createElement(o.Route,{path:this.props.match.url+"/gateway",component:Z})))))}}var re=ae(ne),ie=a(26),se=a.n(ie),oe=a(47),le=a.n(oe),ce=a(201),me=a(202),ue=a.n(me),pe=a(431);var de=n.memo(e=>{const[t,a]=Object(n.useState)(le.a.line),[r,i]=Object(n.useState)("normal"),[s,o]=Object(n.useState)(e.defaultValue||""),l=n.createRef();let c=e.type?e.type:"text";"email"===c&&(c="text"),Object(n.useEffect)(()=>{"password"===c&&l.current&&l.current.focus()},[]);const m=e.placeholder?e.placeholder:"",u=Object(ce.a)(100,t=>{if(e.onChange)if("email"===e.type)if(""===t)i("normal"),a(le.a.lineErrorToFocus);else{const n=ue()(t);n?(i("normal"),a(le.a.lineErrorToFocus)):(i("error"),a(le.a.lineError)),e.onChange(t,n)}else e.onChange(t)});return n.createElement("div",{className:e.className,style:{position:"relative",height:40,...e.style}},n.createElement("div",{className:le.a.inputContainer},n.createElement("input",{className:le.a.input,placeholder:m,value:s,type:c,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",onChange:e=>{o(e.target.value),u(e.target.value)},onKeyUp:t=>{13===t.keyCode&&e.onEnter&&e.onEnter()},onFocus:()=>{"normal"===r&&a(le.a.lineFocus)},onBlur:()=>{"normal"===r&&a(le.a.lineBlur)},ref:l}),n.createElement("div",{className:le.a.info},n.createElement(pe.a,{style:{fontSize:18,color:"#595959"}}))),n.createElement("div",{className:t}))}),he=a.p+"ebcb916068d431662f5b5c66e105a164.svg";const{withRouterConnect:ge}=i.a;class fe extends n.PureComponent{constructor(){super(...arguments),this.state={step:"email",account:""},this.emailValue=this.state.account,this.emailConfirm=!1,this.password=""}componentDidMount(){document.title="登录"}render(){return n.createElement(f,{style:{backgroundImage:`url('${he}')`,backgroundColor:"#262626"}},n.createElement("div",{className:se.a.outer},n.createElement("div",{className:se.a.middle},n.createElement("div",{className:se.a.inner},n.createElement("img",{src:y,style:{width:142.8,height:21.3},alt:"凯神科技"}),"email"===this.state.step?n.createElement(()=>n.createElement(n.Fragment,null,n.createElement("div",{className:se.a.title},"登录"),n.createElement("div",{className:se.a.titleDescribe},"使用公司邮箱登录"),n.createElement(de,{placeholder:"电子邮件",type:"email",defaultValue:this.state.account,onChange:(e,t)=>{this.emailValue=e,this.emailConfirm=!!t},onEnter:()=>{this.emailConfirm&&this.setState({account:this.emailValue,step:"password"})}}),n.createElement("div",{className:se.a.prompt},"申请新的账号"),n.createElement("div",{className:se.a.button,onClick:()=>{this.emailConfirm&&this.setState({account:this.emailValue,step:"password"})}},"下一步")),null):null,"password"===this.state.step?n.createElement(()=>n.createElement(n.Fragment,null,n.createElement("div",{className:se.a.title},"输入密码"),n.createElement("div",{className:se.a.titleContainer},n.createElement("div",{className:se.a.titleDescribe,style:{color:"#faf9f5"}},this.state.account),n.createElement("div",{className:se.a.chooseAccount,style:{marginLeft:10},onClick:()=>{this.emailConfirm=!0,this.setState({step:"email"})}},"使用其他账户")),n.createElement(de,{placeholder:"输入密码",type:"password",onChange:e=>{this.password=e},onEnter:async()=>{try{await this.props.dispatch({type:"global/login",payload:{account:this.state.account,password:this.password}})}catch(e){return}this.props.history.push("/main")}}),n.createElement("div",{className:se.a.prompt},"忘记密码?"),n.createElement("div",{className:se.a.button,onClick:async()=>{try{await this.props.dispatch({type:"global/login",payload:{account:this.state.account,password:this.password}})}catch(e){return}this.props.history.push("/main")}},"登录")),null):null))))}}var ye=ge(fe),Ee={namespace:"global",state:{test:123,token:"",user_id:""},epics:{async test_async(e,t){try{t({type:"global/set_test_state",payload:{test:12345}})}catch(e){throw e}},async login(e,t){try{const{token:a,user_id:n}=await(async(e,t)=>{const a=await V.a.post(A+"/users/login/normal",{account:e,password:q(t),channel:"web"});return K(a.data)})(e.payload.account,e.payload.password);t({type:"global/set_token",payload:{token:a,user_id:n}})}catch(e){throw S.a.error(e.apiInfo),e}}},reducers:{set_token:(e,t)=>t.payload.token&&t.payload.user_id?{...e,token:t.payload.token,user_id:t.payload.user_id}:{...e}}};window.React=n,window.magic=i.a,i.a.addModel(Ee),i.a.start(n.createElement(s.a,null,n.createElement(o.Switch,null,n.createElement(o.Route,{path:"/",exact:!0,component:()=>(window.location.href="/login",null)}),n.createElement(o.Route,{path:"/main",component:re}),n.createElement(o.Route,{path:"/login",component:ye}))),"dashboard",{persist:!0})},47:function(e,t,a){e.exports={inputContainer:"_2EXXrZF8Q0m_tqX3pcomic",input:"_12xEmwvYI3rUjQTQrZGe2I",info:"_1RqQLrJC_R6Qd4NSNyfI0r",line:"_3CKWeDkOLITEy-SPfNgVvg",lineWarn:"_1K3ewY_PEYlGy1CBXPOul5",error:"NpAjWvRfj8HRug4BValu6",lineErrorToFocus:"_1bNetbZBG3DsC7SEF-Cs04",errorToFocus:"_3lOpWFX7zgaexopeMktV6B",lineError:"_3ymVtdqV7APVvOexjGkp-R",lineFocus:"_3fS2i_72jfMEG5S9v0vPj_",focus:"_3lZPHC-y2JsK0SjX_8cRWx",lineBlur:"_2E6nRp6ACAzfRZn1nP8KOz",blur:"_2WjmQkiEDAYVe1LK54m9Wd",warn:"_19M-BRLYNG0YoWxwCywIgk"}},87:function(e,t,a){e.exports={logo:"_3WKQE71Zh8F3aeHeIRW009",menu:"LDNpeneDkZcAq7SuH9KoJ",right:"_17wqRsL2-EwFHp2p2Tx_MN",navBar:"lSfFKcl9qhOtoZP8Xajmo",content:"_3mK3jJqd8uNMUj1vnnZcM2"}}});